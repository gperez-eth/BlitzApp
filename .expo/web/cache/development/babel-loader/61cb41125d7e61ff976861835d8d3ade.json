{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\BlitzApp\\\\src\\\\Screens\\\\Upload.tsx\";\nimport * as React from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Formik } from 'formik';\nimport * as ImagePicker from 'expo-image-picker';\nimport { TouchableOpacity, FlatList, ScrollView } from 'react-native-gesture-handler';\nimport { Ionicons } from '@expo/vector-icons';\nimport ActionButton from 'react-native-action-button';\nimport { PublishButton } from \"../Components\";\nimport Fire from \"../database/Fire\";\nimport DropDownPicker from 'react-native-dropdown-picker';\n\nvar Upload = function Upload(_ref) {\n  var navigation = _ref.navigation;\n\n  var _React$useState = React.useState({\n    primary: '#55CA4B',\n    secondary: '#92E18B'\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      activeColor = _React$useState2[0],\n      setActiveColor = _React$useState2[1];\n\n  var changeColors = function changeColors(category) {\n    console.log(category);\n\n    switch (category) {\n      case 'Deporte':\n        setActiveColor({\n          primary: '#FF7070',\n          secondary: '#EE9393'\n        });\n        break;\n\n      case 'Cocina':\n        setActiveColor({\n          primary: '#FFAD61',\n          secondary: '#FFC793'\n        });\n        break;\n\n      case 'Música':\n        setActiveColor({\n          primary: '#55CA4B',\n          secondary: '#92E18B'\n        });\n        break;\n\n      case 'Fotografía':\n        setActiveColor({\n          primary: '#5297FF',\n          secondary: '#90BCFF'\n        });\n        break;\n\n      case 'Literatura':\n        setActiveColor({\n          primary: '#926CFF',\n          secondary: '#BAA2FF'\n        });\n        break;\n\n      case 'Arte':\n        setActiveColor({\n          primary: '#D55FFF',\n          secondary: '#E7A3FF'\n        });\n        break;\n\n      case 'Ciencias':\n        setActiveColor({\n          primary: '#FF62D3',\n          secondary: '#FFB3EA'\n        });\n        break;\n\n      case 'Coding':\n        setActiveColor({\n          primary: '#807D7D',\n          secondary: '#C1C1C1'\n        });\n        break;\n\n      case 'Gaming':\n        setActiveColor({\n          primary: '#0029B9',\n          secondary: '#6477B9'\n        });\n        break;\n    }\n  };\n\n  var formRef = React.useRef();\n\n  var handleSubmit = function handleSubmit() {\n    if (formRef.current) {\n      formRef.current.handleSubmit();\n    }\n  };\n\n  var addTutorial = function addTutorial(values) {\n    var bd = new Fire(function (error, user) {\n      if (error) {\n        return alert(\"Oh oh, something went wrong\" + error);\n      } else {\n        bd.addTutorial(values, nImages, function (status) {\n          navigation.navigate('UploadingTransition', {\n            status: status\n          });\n        });\n        clearFields();\n      }\n    });\n  };\n\n  var clearFields = function clearFields() {\n    if (formRef.current) {\n      formRef.current.resetForm();\n      setNImages([{\n        image: false,\n        uri: '',\n        key: '1'\n      }]);\n    }\n  };\n\n  var addStep = function addStep() {\n    if (formRef.current) {\n      formRef.current.values.steps.push({\n        description: ''\n      });\n    }\n  };\n\n  var _React$useState3 = React.useState([{\n    image: false,\n    uri: '',\n    key: '1'\n  }]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      nImages = _React$useState4[0],\n      setNImages = _React$useState4[1];\n\n  var openImagePickerAsync = function openImagePickerAsync(key) {\n    var permissionResult, pickerResult, imagesArray;\n    return _regeneratorRuntime.async(function openImagePickerAsync$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.requestCameraRollPermissionsAsync());\n\n          case 2:\n            permissionResult = _context.sent;\n\n            if (!(permissionResult.granted === false)) {\n              _context.next = 6;\n              break;\n            }\n\n            alert('Permission to access camera roll is required!');\n            return _context.abrupt(\"return\");\n\n          case 6:\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync());\n\n          case 8:\n            pickerResult = _context.sent;\n\n            if (!(pickerResult.cancelled === true)) {\n              _context.next = 11;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 11:\n            imagesArray = nImages.slice();\n            imagesArray[key - 1] = {\n              image: true,\n              key: key,\n              uri: pickerResult.uri\n            };\n            setNImages(imagesArray);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }, React.createElement(ScrollView, {\n    showsVerticalScrollIndicator: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.formContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, React.createElement(Formik, {\n    innerRef: formRef,\n    initialValues: {\n      title: '',\n      category: 'Música',\n      dificulty: '',\n      steps: [{\n        description: ''\n      }]\n    },\n    onSubmit: function onSubmit(values) {\n      console.log(values);\n      addTutorial(values);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, function (_ref2) {\n    var handleChange = _ref2.handleChange,\n        handleSubmit = _ref2.handleSubmit,\n        values = _ref2.values;\n    return React.createElement(View, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, React.createElement(View, {\n      style: styles.inputFrame,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    }, React.createElement(Text, {\n      style: [styles.fields, {\n        color: activeColor.primary\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 33\n      }\n    }, \"Titulo*\"), React.createElement(TextInput, {\n      style: [styles.inputs, {\n        borderColor: activeColor.primary\n      }],\n      onChangeText: handleChange('title'),\n      placeholder: \"Construir...\",\n      value: values.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 33\n      }\n    })), React.createElement(View, {\n      style: styles.inputFrame,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 29\n      }\n    }, React.createElement(Text, {\n      style: [styles.fields, {\n        color: activeColor.primary,\n        marginBottom: 10\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 33\n      }\n    }, \"Categor\\xEDa*\"), React.createElement(DropDownPicker, {\n      style: [styles.inputs, {\n        backgroundColor: '#F5F5F5'\n      }],\n      items: [{\n        label: 'Deporte',\n        value: 'Deporte',\n        icon: function icon() {\n          return React.createElement(Ionicons, {\n            name: 'ios-fitness',\n            color: '#FF7070',\n            size: 30,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 90\n            }\n          });\n        }\n      }, {\n        label: 'Cocina',\n        value: 'Cocina',\n        icon: function icon() {\n          return React.createElement(Ionicons, {\n            name: 'ios-restaurant',\n            color: '#FFAD61',\n            size: 30,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 88\n            }\n          });\n        }\n      }, {\n        label: 'Música',\n        value: 'Música',\n        icon: function icon() {\n          return React.createElement(Ionicons, {\n            name: 'ios-musical-notes',\n            color: '#55CA4B',\n            size: 30,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 88\n            }\n          });\n        }\n      }, {\n        label: 'Fotografía',\n        value: 'Fotografía',\n        icon: function icon() {\n          return React.createElement(Ionicons, {\n            name: 'ios-camera',\n            color: '#5297FF',\n            size: 30,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 96\n            }\n          });\n        }\n      }, {\n        label: 'Literatura',\n        value: 'Literatura',\n        icon: function icon() {\n          return React.createElement(Ionicons, {\n            name: 'ios-book',\n            color: '#926CFF',\n            size: 30,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 96\n            }\n          });\n        }\n      }, {\n        label: 'Arte',\n        value: 'Arte',\n        icon: function icon() {\n          return React.createElement(Ionicons, {\n            name: 'ios-brush',\n            color: '#D55FFF',\n            size: 30,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 84\n            }\n          });\n        }\n      }, {\n        label: 'Ciencias',\n        value: 'Ciencias',\n        icon: function icon() {\n          return React.createElement(Ionicons, {\n            name: 'ios-flask',\n            color: '#FF62D3',\n            size: 30,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 92\n            }\n          });\n        }\n      }, {\n        label: 'Coding',\n        value: 'Coding',\n        icon: function icon() {\n          return React.createElement(Ionicons, {\n            name: 'ios-code',\n            color: '#807D7D',\n            size: 30,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 88\n            }\n          });\n        }\n      }, {\n        label: 'Gaming',\n        value: 'Gaming',\n        icon: function icon() {\n          return React.createElement(Ionicons, {\n            name: 'logo-game-controller-b',\n            color: '#0029B9',\n            size: 30,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 88\n            }\n          });\n        }\n      }],\n      defaultValue: \"M\\xFAsica\",\n      labelStyle: {\n        marginLeft: 10,\n        alignSelf: 'center'\n      },\n      itemStyle: {\n        justifyContent: 'flex-start'\n      },\n      dropDownStyle: {\n        backgroundColor: '#F5F5F5',\n        borderBottomWidth: 1,\n        borderColor: activeColor.secondary,\n        height: 300\n      },\n      onChangeItem: function onChangeItem(item) {\n        values.category = item.value;\n        changeColors(item.value);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 33\n      }\n    })), React.createElement(View, {\n      style: styles.inputFrame,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 29\n      }\n    }, React.createElement(Text, {\n      style: [styles.fields, {\n        color: activeColor.primary\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 33\n      }\n    }, \"Dificultad*\"), React.createElement(TextInput, {\n      style: [styles.inputs, {\n        borderColor: activeColor.primary\n      }],\n      onChangeText: handleChange('dificulty'),\n      placeholder: \"5\",\n      keyboardType: \"numeric\",\n      value: values.dificulty,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 33\n      }\n    })), values.steps.map(function (item, index) {\n      return React.createElement(View, {\n        style: styles.inputFrame,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 37\n        }\n      }, React.createElement(Text, {\n        style: [styles.fields, {\n          color: activeColor.primary\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 41\n        }\n      }, \"Paso \", index + 1, \"*\"), React.createElement(TextInput, {\n        style: [styles.inputs, {\n          borderColor: activeColor.primary\n        }],\n        multiline: true,\n        onChangeText: handleChange(\"steps[\" + index + \"].description\"),\n        placeholder: \"bla bla bla...\",\n        value: values.steps[index].description,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 41\n        }\n      }));\n    }), React.createElement(View, {\n      style: styles.inputFrame,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 29\n      }\n    }, React.createElement(Text, {\n      style: [styles.fields, {\n        color: activeColor.primary\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 33\n      }\n    }, \"Imagenes\"), React.createElement(FlatList, {\n      horizontal: true,\n      showsHorizontalScrollIndicator: false,\n      data: nImages,\n      renderItem: function renderItem(_ref3) {\n        var item = _ref3.item;\n        return item.image ? React.createElement(TouchableOpacity, {\n          activeOpacity: 0.8,\n          onPress: function onPress() {\n            return openImagePickerAsync(item.key);\n          },\n          style: [styles.imagePicker, {\n            backgroundColor: activeColor.secondary\n          }],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 45\n          }\n        }, React.createElement(Image, {\n          source: {\n            uri: item.uri\n          },\n          style: styles.images,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 49\n          }\n        })) : React.createElement(TouchableOpacity, {\n          activeOpacity: 0.8,\n          onPress: function onPress() {\n            return openImagePickerAsync(item.key);\n          },\n          style: [styles.imagePicker, {\n            backgroundColor: activeColor.secondary\n          }],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 45\n          }\n        }, React.createElement(Ionicons, {\n          name: 'ios-images',\n          color: 'white',\n          size: 30,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 49\n          }\n        }));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 33\n      }\n    })));\n  }))), React.createElement(PublishButton, {\n    onPress: handleSubmit,\n    color: activeColor.primary,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 9\n    }\n  }), React.createElement(ActionButton, {\n    buttonColor: activeColor.secondary,\n    onPress: function onPress() {\n      setNImages(function (prevImages) {\n        return [].concat(_toConsumableArray(prevImages), [{\n          image: false,\n          uri: '',\n          key: (prevImages.length + 1).toString()\n        }]);\n      });\n      addStep();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default Upload;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  formContainer: {\n    flex: 1,\n    padding: 20\n  },\n  fields: {\n    fontFamily: 'Regular',\n    fontSize: 14\n  },\n  inputs: {\n    borderRadius: 2,\n    padding: 5,\n    borderBottomWidth: 1\n  },\n  inputFrame: {\n    marginBottom: 10\n  },\n  images: {\n    height: 110,\n    width: 80,\n    borderRadius: 15\n  },\n  imagePicker: {\n    height: 110,\n    width: 80,\n    borderRadius: 15,\n    marginHorizontal: 10,\n    marginTop: 10,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"sources":["C:/Users/Administrator/Desktop/BlitzApp/src/Screens/Upload.tsx"],"names":["React","Formik","ImagePicker","TouchableOpacity","FlatList","ScrollView","Ionicons","ActionButton","PublishButton","Fire","DropDownPicker","Upload","navigation","useState","primary","secondary","activeColor","setActiveColor","changeColors","category","console","log","formRef","useRef","handleSubmit","current","addTutorial","values","bd","error","user","alert","nImages","status","navigate","clearFields","resetForm","setNImages","image","uri","key","addStep","steps","push","description","openImagePickerAsync","requestCameraRollPermissionsAsync","permissionResult","granted","launchImageLibraryAsync","pickerResult","cancelled","imagesArray","slice","styles","container","formContainer","title","dificulty","handleChange","inputFrame","fields","color","inputs","borderColor","marginBottom","backgroundColor","label","value","icon","marginLeft","alignSelf","justifyContent","borderBottomWidth","height","item","map","index","imagePicker","images","prevImages","length","toString","StyleSheet","create","flex","padding","fontFamily","fontSize","borderRadius","width","marginHorizontal","marginTop","alignItems"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport { Text, View, StyleSheet, TextInput, Image } from 'react-native';\r\nimport { Formik } from 'formik'\r\nimport * as ImagePicker from 'expo-image-picker'\r\nimport { TouchableOpacity, FlatList, ScrollView } from 'react-native-gesture-handler';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport ActionButton from 'react-native-action-button';\r\nimport { PublishButton } from '../Components'\r\nimport Fire from '../database/Fire'\r\nimport DropDownPicker from 'react-native-dropdown-picker';\r\n\r\nconst Upload = ({ navigation }) => {\r\n\r\n    const [activeColor, setActiveColor] = React.useState(\r\n        {primary: '#55CA4B', secondary: '#92E18B'},\r\n    );\r\n\r\n    const changeColors = (category) => {\r\n        console.log(category)\r\n        switch(category) {\r\n            case 'Deporte':\r\n                setActiveColor({primary: '#FF7070', secondary: '#EE9393'})\r\n                break\r\n            case 'Cocina':\r\n                setActiveColor({primary: '#FFAD61', secondary: '#FFC793'})\r\n                break\r\n            case 'Música':\r\n                setActiveColor({primary: '#55CA4B', secondary: '#92E18B'})\r\n                break\r\n            case 'Fotografía':\r\n                setActiveColor({primary: '#5297FF', secondary: '#90BCFF'})\r\n                break\r\n            case 'Literatura':\r\n                setActiveColor({primary: '#926CFF', secondary: '#BAA2FF'})\r\n                break\r\n            case 'Arte':\r\n                setActiveColor({primary: '#D55FFF', secondary: '#E7A3FF'})\r\n                break\r\n            case 'Ciencias':\r\n                setActiveColor({primary: '#FF62D3', secondary: '#FFB3EA'})\r\n                break\r\n            case 'Coding':\r\n                setActiveColor({primary: '#807D7D', secondary: '#C1C1C1'})\r\n                break\r\n            case 'Gaming':\r\n                setActiveColor({primary: '#0029B9', secondary: '#6477B9'})\r\n                break\r\n        }\r\n    }\r\n\r\n    const formRef = React.useRef()\r\n\r\n    const handleSubmit = () => {\r\n        if (formRef.current) {\r\n          formRef.current.handleSubmit()\r\n        }\r\n    }\r\n    \r\n    const addTutorial = (values) => {\r\n        var bd = new Fire((error, user) => {\r\n            if (error) {\r\n              return alert(\"Oh oh, something went wrong\" + error)\r\n            } else {\r\n                bd.addTutorial(values, nImages, status => {\r\n                    navigation.navigate('UploadingTransition', {status: status})\r\n                })\r\n                clearFields()\r\n            }\r\n        })\r\n    }\r\n\r\n    const clearFields = () => {\r\n         // Clear all fields and images\r\n         if (formRef.current) {\r\n            formRef.current.resetForm()\r\n            setNImages([{image: false, uri: '', key: '1'}])\r\n         }\r\n    }\r\n\r\n    const addStep = () => {\r\n        if (formRef.current) {\r\n            formRef.current.values.steps.push({description: ''})\r\n            /* OMGGGG FINALLY LO CONSEGUÍ!!!\r\n            Basicamente el problema era que al añadir un nuevo paso en el state este no se actualizaba con los valores\r\n            que cambian dentro de formik por lo que al cambiar los valores y darle a añadir un nuevo paso todos los\r\n            campos de formik se reseteaban a cadena vacia las posibles soluciones son:\r\n            1º Poner el boton de añadir nuevos campos dentro de formik, \r\n            2º Usar una referencia\r\n            */\r\n        }\r\n    }\r\n\r\n    const [nImages, setNImages] = React.useState([\r\n        {image: false, uri: '', key: '1'},\r\n    ]);\r\n\r\n    let openImagePickerAsync = async (key) => {\r\n        let permissionResult = await ImagePicker.requestCameraRollPermissionsAsync();\r\n\r\n        if (permissionResult.granted === false) {\r\n            alert('Permission to access camera roll is required!');\r\n            return;\r\n        }\r\n\r\n        let pickerResult = await ImagePicker.launchImageLibraryAsync();\r\n\r\n        if (pickerResult.cancelled === true) {\r\n            return;\r\n        }\r\n\r\n        const imagesArray = nImages.slice() //copy the array\r\n        imagesArray[key-1] = {image: true, key: key, uri: pickerResult.uri} //execute the manipulations\r\n        setNImages(imagesArray)\r\n    };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n        <ScrollView showsVerticalScrollIndicator={false}>\r\n        <View style={styles.formContainer}>\r\n            <Formik\r\n                innerRef={formRef}\r\n                initialValues={{title: '', category: 'Música', dificulty: '', steps: [{description: ''},]}}\r\n                onSubmit={(values) => {\r\n                    console.log(values)\r\n                    addTutorial(values)\r\n                }}>\r\n                    {({ handleChange, handleSubmit, values }) => (\r\n                        <View>\r\n                            <View style={styles.inputFrame}>\r\n                                <Text style={[styles.fields, {color: activeColor.primary}]}>Titulo*</Text>\r\n                                <TextInput\r\n                                    style={[styles.inputs, {borderColor: activeColor.primary}]}\r\n                                    onChangeText={handleChange('title')}\r\n                                    placeholder='Construir...'\r\n                                    value={values.title}\r\n                                />\r\n                            </View>\r\n\r\n                            <View style={styles.inputFrame}>\r\n                                <Text style={[styles.fields, {color: activeColor.primary, marginBottom: 10}]}>Categoría*</Text>\r\n                                <DropDownPicker\r\n                                    style={[styles.inputs, {backgroundColor: '#F5F5F5'}]}\r\n                                    items={[\r\n                                        {label: 'Deporte', value: 'Deporte', icon: () => <Ionicons name={'ios-fitness'} color={'#FF7070'} size={30} />},\r\n                                        {label: 'Cocina', value: 'Cocina', icon: () => <Ionicons name={'ios-restaurant'} color={'#FFAD61'} size={30} />},\r\n                                        {label: 'Música', value: 'Música', icon: () => <Ionicons name={'ios-musical-notes'} color={'#55CA4B'} size={30} />},\r\n                                        {label: 'Fotografía', value: 'Fotografía', icon: () => <Ionicons name={'ios-camera'} color={'#5297FF'} size={30} />},\r\n                                        {label: 'Literatura', value: 'Literatura', icon: () => <Ionicons name={'ios-book'} color={'#926CFF'} size={30} />},\r\n                                        {label: 'Arte', value: 'Arte', icon: () => <Ionicons name={'ios-brush'} color={'#D55FFF'} size={30} />},\r\n                                        {label: 'Ciencias', value: 'Ciencias', icon: () => <Ionicons name={'ios-flask'} color={'#FF62D3'} size={30} />},\r\n                                        {label: 'Coding', value: 'Coding', icon: () => <Ionicons name={'ios-code'} color={'#807D7D'} size={30} />},\r\n                                        {label: 'Gaming', value: 'Gaming', icon: () => <Ionicons name={'logo-game-controller-b'} color={'#0029B9'} size={30} />},\r\n                                    ]}\r\n                                    defaultValue='Música'\r\n                                    labelStyle={{ marginLeft: 10, alignSelf: 'center'}}\r\n                                    itemStyle={{ justifyContent: 'flex-start' }}\r\n                                    dropDownStyle={{backgroundColor: '#F5F5F5', borderBottomWidth: 1, borderColor: activeColor.secondary, height: 300}}\r\n                                    onChangeItem={item => {\r\n                                            values.category = item.value\r\n                                            changeColors(item.value)\r\n                                        }\r\n                                    }\r\n                                />\r\n                            </View>\r\n\r\n                            <View style={styles.inputFrame}>\r\n                                <Text style={[styles.fields, {color: activeColor.primary}]}>Dificultad*</Text>\r\n                                <TextInput\r\n                                    style={[styles.inputs, {borderColor: activeColor.primary}]}\r\n                                    onChangeText={handleChange('dificulty')}\r\n                                    placeholder='5'\r\n                                    keyboardType='numeric'\r\n                                    value={values.dificulty}\r\n                                />\r\n                            </View>\r\n\r\n                            {values.steps.map((item, index) => {\r\n                                return (\r\n                                    <View style={styles.inputFrame}>\r\n                                        <Text style={[styles.fields, {color: activeColor.primary}]}>Paso {index+1}*</Text>\r\n                                        <TextInput\r\n                                            style={[styles.inputs, {borderColor: activeColor.primary}]}\r\n                                            multiline={true}\r\n                                            onChangeText={handleChange(`steps[${index}].description`)}\r\n                                            placeholder='bla bla bla...'\r\n                                            value={values.steps[index].description}\r\n                                        />\r\n                                    </View>\r\n                                )\r\n                            })}\r\n\r\n                            <View style={styles.inputFrame}>\r\n                                <Text style={[styles.fields, {color: activeColor.primary}]}>Imagenes</Text>\r\n                                <FlatList horizontal showsHorizontalScrollIndicator={false} data={nImages}\r\n                                    renderItem={({item}) => \r\n                                        item.image ?\r\n                                            <TouchableOpacity activeOpacity={0.8} onPress={() => openImagePickerAsync(item.key)} style={[styles.imagePicker, {backgroundColor: activeColor.secondary}]}>\r\n                                                <Image source={{uri: item.uri}} style={styles.images}/>\r\n                                            </TouchableOpacity>\r\n                                        : \r\n                                            <TouchableOpacity activeOpacity={0.8} onPress={() => openImagePickerAsync(item.key)} style={[styles.imagePicker, {backgroundColor: activeColor.secondary}]}>\r\n                                                <Ionicons name={'ios-images'} color={'white'} size={30} />\r\n                                            </TouchableOpacity>\r\n                                    }/>\r\n                            </View>\r\n                        </View>\r\n                    )}\r\n            </Formik>\r\n        </View>\r\n        \r\n        </ScrollView>\r\n        <PublishButton onPress={handleSubmit} color={activeColor.primary} />\r\n        <ActionButton buttonColor={activeColor.secondary}\r\n            onPress={() => {\r\n                setNImages((prevImages) => {\r\n                    return [\r\n                        ...prevImages,\r\n                        {image: false, uri: '', key: (prevImages.length + 1).toString()}\r\n                    ]\r\n                })\r\n                addStep()\r\n            }}\r\n        />  \r\n    </View>\r\n  );\r\n};\r\n\r\nexport default Upload;\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n    },\r\n    formContainer: {\r\n        flex: 1,\r\n        padding: 20,\r\n    },\r\n    fields: {\r\n        fontFamily: 'Regular',\r\n        fontSize: 14,\r\n    },\r\n    inputs: {\r\n        borderRadius: 2,\r\n        padding: 5,\r\n        borderBottomWidth: 1,\r\n    },\r\n    inputFrame: {\r\n        marginBottom: 10\r\n    },\r\n    images: {\r\n        height: 110,\r\n        width: 80,\r\n        borderRadius: 15,\r\n    },\r\n    imagePicker: {\r\n        height: 110,\r\n        width: 80,\r\n        borderRadius: 15,\r\n        marginHorizontal: 10,\r\n        marginTop: 10,\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}